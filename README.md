# 🎵 Shazam Telegram Bot

یک ربات تلگرامی قدرتمند برای شناسایی موسیقی با استفاده از ShazamIO

## 🌟 ویژگی‌ها

- 🎵 **شناسایی موسیقی**: شناسایی آهنگ‌ها از فایل‌های صوتی
- 🌐 **جستجوی اینلاین**: جستجوی آهنگ‌ها در گروه‌ها و کانال‌ها
- 🌍 **چندزبانه**: پشتیبانی از فارسی و انگلیسی
- ✏️ **ویرایش اطلاعات**: امکان ویرایش اطلاعات آهنگ‌های شناسایی شده
- 🎼 **اطلاعات کامل**: دریافت اطلاعات کامل آهنگ و هنرمند
- 🎶 **آهنگ‌های مشابه**: پیدا کردن آهنگ‌های مشابه
- 📊 **آمار شنوندگان**: نمایش تعداد دفعات شنیده شدن آهنگ

## 📋 پیش‌نیازها

- Python 3.13
- توکن ربات تلگرام (از @BotFather)
- پکیج‌های مورد نیاز (در `requirements.txt`)

## 🚀 نصب و راه‌اندازی

### 1. کلون کردن پروژه
```bash
git clone <repository-url>
cd shazam-telegram-bot
```

### 2. اجرای اسکریپت نصب
```bash
chmod +x setup.sh
./setup.sh
```

### 3. تنظیم توکن ربات
اسکریپت نصب به طور خودکار توکن ربات را از شما دریافت می‌کند و در فایل `shazam_bot.py` تنظیم می‌کند.

### 4. اجرای ربات
```bash
./start_bot.sh
```

یا به صورت دستی:
```bash
python3 shazam_bot.py
```

## 🔧 تنظیمات دستی

اگر می‌خواهید تنظیمات را به صورت دستی انجام دهید:

### 1. نصب پکیج‌ها
```bash
pip install -r requirements.txt
```

### 2. تنظیم توکن ربات
فایل `shazam_bot.py` را باز کرده و خط زیر را ویرایش کنید:
```python
BOT_TOKEN = "YOUR_BOT_TOKEN_HERE"  # توکن خود را جایگزین کنید
```

### 3. تنظیم کاربر ادمین (اختیاری)
```python
ADMIN_USER_ID = 123456789  # شناسه عددی کاربری خود را وارد کنید
```

## 📱 نحوه استفاده

### دستورات اصلی
- `/start` - شروع ربات و انتخاب زبان
- `/help` - نمایش راهنما
- `/language` - تغییر زبان

### ارسال فایل صوتی
1. یک فایل صوتی (MP3, OGG, etc.) برای ربات ارسال کنید
2. ربات به طور خودکار آهنگ را شناسایی می‌کند
3. اطلاعات آهنگ نمایش داده می‌شود
4. می‌توانید اطلاعات آهنگ را ویرایش کنید

### جستجوی اینلاین در گروه‌ها
در هر گروه یا کانالی، تایپ کنید:
```
@your_bot_username نام آهنگ یا هنرمند
```

### ویرایش اطلاعات آهنگ
پس از شناسایی آهنگ:
1. روی دکمه "✏️ ویرایش اطلاعات آهنگ" کلیک کنید
2. فیلد مورد نظر را انتخاب کنید
3. اطلاعات جدید را وارد کنید

## 🌐 راه‌اندازی روی PythonAnywhere

راهنمای کامل راه‌اندازی روی PythonAnywhere در فایل `PYTHONANYWHERE_GUIDE.md` موجود است.

### خلاصه مراحل:
1. آپلود فایل‌ها روی PythonAnywhere
2. تنظیم توکن ربات
3. نصب پکیج‌ها
4. اجرای ربات
5. تنظیم Scheduled Task برای اجرای خودکار

## 📂 ساختار پروژه

```
shazam-telegram-bot/
├── shazam_bot.py          # فایل اصلی ربات
├── run_bot.py            # اسکریپت اجرا با قابلیت ری‌استارت خودکار
├── requirements.txt      # پکیج‌های مورد نیاز
├── setup.sh              # اسکریپت نصب خودکار
├── start_bot.sh          # اسکریپت شروع ربات
├── PYTHONANYWHERE_GUIDE.md  # راهنمای نصب روی PythonAnywhere
└── README.md             # این فایل
```

## 🛠️ قابلیت‌های فنی

### پشتیبانی از فرمت‌های صوتی
- MP3
- OGG
- WAV
- M4A
- و سایر فرمت‌های پشتیبانی شده توسط Shazam

### سیستم زبان
- فارسی (🇮🇷)
- انگلیسی (🇺🇸)

### مدیریت خطاها
- مدیریت خطاهای شبکه
- ری‌استارت خودکار در صورت خطا
- لاگ‌گیری کامل

### امنیت
- محافظت از توکن ربات
- پشتیبانی از کاربر ادمین
- اعتبارسنجی ورودی‌ها

## 🔧 عیب‌یابی

### مشکلات رایج

#### ربات اجرا نمی‌شود
```bash
# بررسی نصب پایتون
python3 --version

# نصب مجدد پکیج‌ها
pip install --upgrade -r requirements.txt
```

#### خطای توکن نامعتبر
- مطمئن شوید توکن ربات صحیح است
- توکن را از @BotFather دوباره دریافت کنید

#### مشکل در شناسایی آهنگ
- فایل صوتی با کیفیت کافی ارسال کنید
- از فرمت‌های پشتیبانی شده استفاده کنید
- اتصال اینترنت را بررسی کنید

### مشاهده لاگ‌ها
```bash
# مشاهده لاگ‌های زنده
tail -f bot.log

# مشاهده خطاها
grep ERROR bot.log
```

## 📊 مانیتورینگ

### لاگ‌ها
- تمام عملیات ربات در فایل `bot.log` ثبت می‌شود
- لاگ‌ها شامل اطلاعات خطاها، عملیات کاربران و وضعیت سیستم هستند

### آمار استفاده
- تعداد آهنگ‌های شناسایی شده
- تعداد کاربران فعال
- زبان‌های انتخاب شده توسط کاربران

## 🔄 به‌روزرسانی

### به‌روزرسانی کد
```bash
# متوقف کردن ربات
pkill -f shazam_bot.py

# دریافت نسخه جدید
git pull origin main

# نصب پکیج‌های جدید
pip install -r requirements.txt

# اجرای مجدد ربات
python3 shazam_bot.py
```

### به‌روزرسانی پکیج‌ها
```bash
pip install --upgrade -r requirements.txt
```

## 🤝 مشارکت

برای مشارکت در توسعه پروژه:
1. یک فورک از پروژه ایجاد کنید
2. تغییرات خود را اعمال کنید
3. یک پول ریکوئست ارسال کنید

## 📄 مجوز

این پروژه تحت مجوز MIT منتشر شده است.

## 📞 پشتیبانی

اگر در استفاده از ربات مشکلی داشتید:
1. راهنمای عیب‌یابی را مطالعه کنید
2. لاگ‌ها را بررسی کنید
3. در صورت نیاز، یک ایشو در گیت‌هاب ایجاد کنید

## 🎉 تشکرها

- [@shazamio](https://github.com/shazamio/ShazamIO) برای کتابخانه عالی ShazamIO
- تیم پایتون-تلگرام-بات برای فریمورک قدرتمند
- تمام کاربرانی که از این ربات استفاده می‌کنند

---

**موفق باشید! 🎵🤖**